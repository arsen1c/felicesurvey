<!DOCTYPE html>
<html>
	<%- include('./partials/head.ejs') %>
	<link rel="stylesheet" href="../css/all.css">
	<!-- Font awesome -->
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css" integrity="sha512-+4zCK9k+qNFUR5X+cKL9EIR+ZOhtIloNl9GIKS57V1MyNsYpYcUrUeQc9vNfzsWfV28IaLL3i96P9sdNyeRssA==" crossorigin="anonymous" />
	<script src="../js/all.js" defer></script>

<style>
	body {
		font-family: sans-serif;
		font-size: 1.3rem;
		color: #4f4f4f;
		background: #fefcff;
	}

	.all-main {
		display: grid;
		gap: 1rem;
		
		grid-template-columns: repeat(auto-fit, minmax(440px, 1fr));
		grid-auto-rows: 205px;
	}

	.survey-card {
		/*border: 1px solid grey;*/
		margin: 2px;
		box-shadow: rgba(149, 157, 165, 0.2) 0px 8px 24px;
		padding: 0 0.7rem 0.7rem 0.7rem;
		border-radius: 8px;
		background: #fff;
		position: relative;
	}

	.title {
		font-weight: bold;
	}
	.name {
		text-transform: capitalize;
	}
	.snippets {
		max-height: 117px;
		overflow-y: hidden;
	}

	.actions {
		margin-top: 1.7rem;
	}

	/* Styling BUttons */
	.show-more,
	.delete {
		border: none;
		padding: 0.7rem;
		font-size: 1rem;
		background: #cdb3fc; 
		/* #e0cfff */
		border-radius: 3px;
		color: #4f4f4f;
		cursor: pointer;
		box-shadow: rgba(50, 50, 105, 0.15) 0px 2px 5px 0px, rgba(0, 0, 0, 0.05) 0px 1px 1px 0px;
		/*box-shadow: rgba(0, 0, 0, 0.08) 0px 4px 12px;*/
	}
	.delete {
		background: none;
		color: #ff5454;
	}
	.show-more:hover,
	.delete:hover {
		opacity: 0.9;
	}

	.show-more:hover,
	.delete:hover {
		opacity: 0.9;
	}

	.date {
		color: #9c9c9c;
		position: absolute;
		right: 1rem;
		bottom: 2rem;
		font-size: 0.9rem;
	}

</style>

<body>
	<div id="snackbar"></div>
	<div class="all-main">
		<% if (data) {%>
			<% data.forEach(survey => { %>
				<div class="survey-card">
					<div class="snippets">
						<p class="name"><span class="title">Name:</span> <%= survey.name %></p>
						<p class="dream"><span class="title">Dream:</span> <%= survey.dream %></p>
					</div>
					<div class="actions">
						<button class="show-more" data-id=<%= survey.id %>>Show More</button>
						<button class="delete" data-id=<%= survey.id %>><i class="fas fa-trash-alt "></i></button>
					</div>
					<div class="date">
						<span><%= new Date(survey.created_at).toDateString().split("GMT")[0] %></span>
					</div>
				</div>
			<% }) %>
		<% } else {%>
				<p>Theres nothing to display at the moment!</p>
		<% } %>
	</div>
</body>
</html>